<% name = 'signup' %>
<% title = 'OpenMRS ID - Sign Up' %>
<% headline = 'Get an OpenMRS ID' %>
<% sidebar = ['sidebar/id-whatis', 'sidebar/forgotpassword'] %>

<% headAppend += '<script src="/signup/resource/md5.js"></script>\n' %>
<% headAppend += '<script src="/signup/resource/signup-public.js"></script>\n' %>
<% headAppend += '<script type="text/javascript">var SPINNER="'+spinner+'";</script>\n' %>

<form action="/signup" method="post" autocomplete="off" style="padding-top:16px">
	<h1 style="display:inline; padding-right:8px">
		Sign up for your OpenMRS ID
	</h1>
	<p style="display:inline">
    Already have one? <a href="/login">Sign in.</a>
  </p>
  
  <div class="bg-box">
    
    <div class="field<% if (fail.username) { %> fail<% } %>">
      <input type="text" name="<%=disguise('username', spinner)%>"
        placeholder="Username"
        <% if (values.username) { %>value="<%= values.username %>"
        <% } else { %>autofocus<% } %>>

      <span class="description">
        <span class="failtext"><% if (failReason.username) { %>
          <%= failReason.username %>
          <% } else { %>Please enter a valid username.<% } %>
        </span>
        Usernames can only contain letters and numbers.
      </span>

    </div>

    <div class="field two-up<% if (fail.firstName || fail.lastName ) { %> fail<% } %>">
      <input type="text" name="<%=disguise('firstName', spinner)%>"
        placeholder="Given Name"<% if (values.firstName) { %>
        value="<%= values.firstName %>"<% } else if (values.username) { %>
        autofocus<% } %>>

      <input type="text" name="<%=disguise('lastName', spinner)%>" placeholder="Surname"
        <% if (values.lastName) { %>value="<%= values.lastName %>"
        <% } else if (values.username && values.firstName) { %>
        autofocus<% } %>>

        <span class="failtext">
          Both a given name and surname are required.
        </span>

    </div>

    <div class="field<% if (fail.primaryEmail) { %> fail<% } %>">
      <input type="text" name="<%=disguise('primaryEmail', spinner)%>"
        placeholder="Email Address"
        <% if (values.primaryEmail) { %>value="<%= values.primaryEmail %>"
        <% } else if (values.username && values.firstName && values.lastName) { %>
        autofocus<% } %>>

        <span class="failtext">
          <% if (failReason.primaryEmail) { %><%= failReason.primaryEmail %>
          <% } else { %>Please enter a valid email address.<% } %>
        </span>
    </div>

    <div class="field<% if (fail.password) { %> fail<% } %>">
      <input type="text" name="<%=disguise('country', spinner)%>"
        placeholder="Country">

        <span class="failtext">Please enter a country.</span>
    </div>

    <div class="field<% if (fail.password) { %> fail<% } %>">

      <input type="password" name="<%=disguise('password', spinner)%>"
        placeholder="Password"
        <% if (values.username && values.firstName && values.lastName && values.primaryEmail) { %>
        autofocus<% } %>>

      <span class="description">
        <span class="failtext">
          <% if (failReason.password) { %><%= failReason.password %>
          <% } else { %>Please enter a valid password.<% } %>
        </span>
        Passwords must be at least 8 characters long.
      </span>
    </div>

    <input type="hidden" name="spinner" value="<%=spinner%>">
    <input type="hidden" name="<%=disguise('timestamp', spinner)%>"
      value="<%=timestamp%>">

    <div class="field">
      <input type="submit" class="btn btn-success" name="<%=disguise('submit',spinner)%>" class="icon-ok" value="Join the Community"
        <% if (renderLayout == false) { %> formtarget="_blank"<% } %>>
    </div>
  </div>
</form>
