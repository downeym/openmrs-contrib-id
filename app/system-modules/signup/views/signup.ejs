<% name = 'signup' %>
<% title = 'OpenMRS ID - Sign Up' %>
<% headline = 'Get an OpenMRS ID' %>
<% sidebar = ['sidebar/id-whatis', 'sidebar/forgotpassword'] %>

<% headAppend += '<script src="/signup/resource/signup-public.js"></script>\n' %>
<% headAppend += '<script type="text/javascript">var SPINNER="'+spinner+'";</script>\n' %>

<% headAppend += '<script src="https://www.google.com/recaptcha/api.js"></script>\n' %>
<% headAppend += '<script src="/bower_components/cryptojslib/rollups/md5.js"></script>\n' %>

<form action="/signup" method="post" autocomplete="off">
	<p>
		Already have an ID? <a href="/login">Log in now</a> to access your
		account settings.
	</p>

	<div class="field<% if (fail.username) { %> fail<% } %>">
		<label>Username</label>
		<input type="text" name="<%=disguise('username', spinner)%>"
			placeholder="Username"
			<% if (values.username) { %>value="<%= values.username %>"
			<% } else { %>autofocus<% } %>>

		<span class="description">
			<span class="failtext"><% if (failReason.username) { %>
				<%= failReason.username %>
				<% } else { %>Please enter a valid username.<% } %>
			</span>
			Your username can only contain letters and numbers (0-9, A-Z, a-z).
		</span>

	</div>

	<div class="field two-up<% if (fail.firstName || fail.lastName ) { %> fail<% } %>">
		<label>Name</label>
		<input type="text" name="<%=disguise('firstName', spinner)%>"
			placeholder="Given Name"<% if (values.firstName) { %>
			value="<%= values.firstName %>"<% } else if (values.username) { %>
			autofocus<% } %>>

		<input type="text" name="<%=disguise('lastName', spinner)%>" placeholder="Surname"
			<% if (values.lastName) { %>value="<%= values.lastName %>"
			<% } else if (values.username && values.firstName) { %>
			autofocus<% } %>>

		<span class="description">
			<span class="failtext">
				Both a given name and surname are required.
			</span>
			Your name identifies you across the OpenMRS Community.
		</span>
	</div>

	<div class="field<% if (fail.primaryEmail) { %> fail<% } %>">
		<label>Email</label>
		<input type="text" name="<%=disguise('primaryEmail', spinner)%>"
			placeholder="Email Address"
			<% if (values.primaryEmail) { %>value="<%= values.primaryEmail %>"
			<% } else if (values.username && values.firstName && values.lastName) { %>
			autofocus<% } %>>

		<span class="description">
			<span class="failtext">
				<% if (failReason.primaryEmail) { %><%= failReason.primaryEmail %>
				<% } else { %>Please enter a valid email address.<% } %>
			</span>
			We'll send any notifications to this address. You'll always be able
			to control what mail you receive.
		</span>
	</div>

	<div class="field">
		<label>Country</label>
		<input type="text" name="<%=disguise('country', spinner)%>"
			placeholder="Country">

		<span class="description">
			<span class="failtext">Please enter a country.</span>
			Help us learn where our community is from by providing your country.
			</span>
		</span>
	</div>

	<div class="field<% if (fail.password) { %> fail<% } %>">
		<label>Password</label>

		<input type="password" name="<%=disguise('password', spinner)%>"
			placeholder="Password"
			<% if (values.username && values.firstName && values.lastName && values.primaryEmail) { %>
			autofocus<% } %>>

		<span class="description">
			<span class="failtext">
				<% if (failReason.password) { %><%= failReason.password %>
				<% } else { %>Please enter a valid password.<% } %>
			</span>
			Passwords must be at least 8 characters long.
		</span>
	</div>

    <div class="g-recaptcha" data-sitekey="<%- recaptchaPublic %>"></div>

	<input type="hidden" name="spinner" value="<%=spinner%>">
	<input type="hidden" name="<%=disguise('timestamp', spinner)%>"
		value="<%=timestamp%>">

	<div class="field ">
		<input type="submit" class="btn btn-success" name="<%=disguise('submit',spinner)%>" class="icon-ok" value="Join the Community &#187;" >
	</div>

</form>
